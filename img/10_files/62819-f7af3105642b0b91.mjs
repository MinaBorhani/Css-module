(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[62819],{618674:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},889464:(e,t,n)=>{var a=n(618674)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=a},607187:(e,t,n)=>{var a=n(889464),r=n(479833),o=/[&<>"']/g,i=RegExp(o.source);e.exports=function(e){return(e=r(e))&&i.test(e)?e.replace(o,a):e}},482131:(e,t,n)=>{n.d(t,{kz:()=>_,Y:()=>v,Tx:()=>w,Tb:()=>R});var a,r,o,i,s=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},c=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}},u=function(e,t){var n=function n(a){"pagehide"!==a.type&&"hidden"!==document.visibilityState||(e(a),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},d=function(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)},p=function(e,t,n){var a;return function(r){t.value>=0&&(r||n)&&(t.delta=t.value-(a||0),(t.delta||void 0===a)&&(a=t.value,e(t)))}},l=-1,m=function(){return"hidden"===document.visibilityState?0:1/0},f=function(){u((function(e){var t=e.timeStamp;l=t}),!0)},y=function(){return l<0&&(l=m(),f(),d((function(){setTimeout((function(){l=m(),f()}),0)}))),{get firstHiddenTime(){return l}}},v=function(e,t){var n,a=y(),r=s("FCP"),o=function(e){"first-contentful-paint"===e.name&&(u&&u.disconnect(),e.startTime<a.firstHiddenTime&&(r.value=e.startTime,r.entries.push(e),n(!0)))},i=performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],u=i?null:c("paint",o);(i||u)&&(n=p(e,r,t),i&&o(i),d((function(a){r=s("FCP"),n=p(e,r,t),requestAnimationFrame((function(){requestAnimationFrame((function(){r.value=performance.now()-a.timeStamp,n(!0)}))}))})))},T=!1,g=-1,_=function(e,t){T||(v((function(e){g=e.value})),T=!0);var n,a=function(t){g>-1&&e(t)},r=s("CLS",0),o=0,i=[],l=function(e){if(!e.hadRecentInput){var t=i[0],a=i[i.length-1];o&&e.startTime-a.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,i.push(e)):(o=e.value,i=[e]),o>r.value&&(r.value=o,r.entries=i,n())}},m=c("layout-shift",l);m&&(n=p(a,r,t),u((function(){m.takeRecords().map(l),n(!0)})),d((function(){o=0,g=-1,r=s("CLS",0),n=p(a,r,t)})))},h={passive:!0,capture:!0},E=new Date,b=function(e,t){a||(a=t,r=e,o=new Date,A(removeEventListener),C())},C=function(){if(r>=0&&r<o-E){var e={entryType:"first-input",name:a.type,target:a.target,cancelable:a.cancelable,startTime:a.timeStamp,processingStart:a.timeStamp+r};i.forEach((function(t){t(e)})),i=[]}},S=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){b(e,t),r()},a=function(){r()},r=function(){removeEventListener("pointerup",n,h),removeEventListener("pointercancel",a,h)};addEventListener("pointerup",n,h),addEventListener("pointercancel",a,h)}(t,e):b(t,e)}},A=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,S,h)}))},w=function(e,t){var n,o=y(),l=s("FID"),m=function(e){e.startTime<o.firstHiddenTime&&(l.value=e.processingStart-e.startTime,l.entries.push(e),n(!0))},f=c("first-input",m);n=p(e,l,t),f&&u((function(){f.takeRecords().map(m),f.disconnect()}),!0),f&&d((function(){var o;l=s("FID"),n=p(e,l,t),i=[],r=-1,a=null,A(addEventListener),o=m,i.push(o),C()}))},I=new Set,R=function(e,t){var n,a=y(),r=s("LCP"),o=function(e){var t=e.startTime;t<a.firstHiddenTime&&(r.value=t,r.entries.push(e)),n()},i=c("largest-contentful-paint",o);if(i){n=p(e,r,t);var l=function(){I.has(r.id)||(i.takeRecords().map(o),i.disconnect(),I.add(r.id),n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,l,{once:!0,capture:!0})})),u(l,!0),d((function(a){r=s("LCP"),n=p(e,r,t),requestAnimationFrame((function(){requestAnimationFrame((function(){r.value=performance.now()-a.timeStamp,I.add(r.id),n(!0)}))}))}))}}},627578:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(607187),r=n.n(a);const o={};o._showErrorCallback=o._showErrorCallback||null,o.setShowHtmlErrorCallback=function(e){o._showErrorCallback=e},o.showError=function(e,t,n){const a=r()(e);return o.showHtmlError(a,t,n)},o.showHtmlError=function(e,t,n){"function"==typeof o._showErrorCallback&&o._showErrorCallback(e,t,n)};const i=o},230457:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(447186);const r=()=>a.Z.isAuthenticated()&&!!a.Z.attributes.facebook_id&&!a.Z.isLimitedLogin()},282152:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(737614);function r(){const e=a.Z.instance;return`${e.is_mobile_agent?"mobile":"desktop"}.${e.country}.${e.user_agent_platform}.${e.browser_name}`.replace(/ /g,"_")}},94236:(e,t,n)=>{n.d(t,{Z:()=>a});const a=(0,n(667294).createContext)(!1)},666584:(e,t,n)=>{n.d(t,{cA:()=>O,fM:()=>N,N5:()=>k});var a=n(667294),r=n(68348);const o=e=>{const{deviceType:t,isBot:n,isSocialBot:a}=e;return`coreWebVitalsLite.v1.${(a?"socialBot":n&&"bot")||"nonbot"}.${t}`};var i=n(731164),s=n(256721),c=n(182513),u=n(482131);const d=(0,c.X)("LayoutShiftDebugger"),p=e=>e instanceof HTMLElement&&e.dataset&&(e.dataset.layoutShiftBoundaryId||e.dataset.testId)||e.parentNode&&p(e.parentNode)||null,l=e=>Math.round(1e3*e);let m=[];const f=({staticContext:e,getCurrentRoute:t,getLastNavigationTime:n})=>{const a=(0,s.Jx)({annotateMarks:["initialAppLoad","RenderReactContainer"],name:"cumulative_layout_shift",pwtStaticContext:e});let r=0;const c=e=>{r=e.timeStamp};window.addEventListener("scroll",c),window.addEventListener("beforeunload",(()=>{window.removeEventListener("scroll",c)}));const f=`${o(e)}.CLS`,y=()=>(e=>{let t=Object.freeze({}),n=0;m.forEach((({value:e,shift:{sources:a},route:r,hadRecentNavigation:o,hadRecentScroll:i})=>{if(n+=e,!a||!a.length)return;const s=e/a.length;a.forEach((({node:e})=>{const n=e?p(e)||"ROOT":"NODE_REMOVED",a={route:r,boundaryId:n,hadRecentNavigation:o,hadRecentScroll:i},c=JSON.stringify(a);t={...t,[c]:{score:((t[c]||{}).score||0)+s,tags:a}}}))})),Object.keys(t).forEach((n=>{const{score:a,tags:r}=t[n];i.Z.count(`${e}.shifts`,l(a),1,{...r})})),d("Debug CLS boundaries",n,t,m),m=[]})(f);let v,T,g=0,_=0,h=0;(0,u.kz)((({entries:e,value:a})=>{if(h=a||0,e.length){v=t(),T=n();const o=e[0].startTime,i=g!==o,s=i?e:e.slice(_);i&&(g=o),m=m.concat(s.map((e=>({value:a,shift:e,route:v,hadRecentNavigation:T>0&&T+500>e.startTime,hadRecentScroll:r>0&&r+500>e.startTime})))),_=e.length}}),!0);const E=setInterval((()=>{if(m.length){y();const t=(e=h)<=.1?"good":e<=.25?"adequate":"poor";i.Z.count(`${f}.${t}`,1,1),a.stop(l(h))}var e}),1e3);window.addEventListener("beforeunload",(()=>{clearInterval(E),0===h&&a.abort("no_shifts_detected")}))};var y=n(641239);const v={pin_closeup:{LCP:"pin_closeup_lcp",FID:"pin_closeup_fid"},board:{LCP:"board_lcp",FID:"board_fid"}},T=({surface:e,isAuthenticated:t})=>{if(t)return[];switch(e){case"pin_closeup":return["mweb_pin_page_ssr_lite"];default:return[]}},g=({pwtStaticContext:e,surface:t})=>{const n="pin_closeup"===t||"board"===t?(({pwtStaticContext:e,surface:t})=>{const n=(0,s.Jx)({annotateExperiments:T({surface:t,isAuthenticated:e.isAuthenticated}),annotateResourceTimingForSurface:t,annotateMarks:["initialAppLoad","RenderReactContainer",...e.isAuthenticated?[]:["firstClientRenderUnauthPageWrapper","mountUnauthPageWrapper"],..."pin_closeup"===t?["firstClientRenderCloseupPage","firstClientRenderCloseupImage"]:[]],name:v[t].LCP,pwtStaticContext:e}),a=(0,s.Jx)({name:v[t].FID,pwtStaticContext:e});return(e,t)=>{"LCP"===e?n.stop(t):"FID"===e&&a.stop(t)}})({pwtStaticContext:e,surface:t}):null,a={},r=(r,s)=>{if(!a[r]){a[r]=!0;const c=o(e);if("LCPCount"===r){const e=`${c}.${t}.${r}`;i.Z.count(`${e}.sum`,s,1),i.Z.increment(`${e}.size`,1)}else i.Z.timing(`${c}.${t}.${r}`,s,1),n&&n(r,s)}};(0,u.Tx)((({value:e})=>r("FID",(e=>Number(e.toFixed(2)))(e)))),(0,u.Tb)((({value:e})=>{r("LCPCount",(0,y.Kj)()),r("LCP",(e=>10*Math.round(e/10))(e))})),(0,u.Y)((({value:e})=>r("FCP",e)))},_=e=>{switch(e){case"/":return"homefeed";case"/pin/:id":return"pin_closeup";case"/pin/:id/visual-search":return"flashlight";case"/:username/:slug":return"board";case"/:username":return"other_profile";case"/search/:scope":return"search";case"/topics/:interest":return"topic";default:return null}};var h=n(164485),E=n(139585),b=n(840059),C=n(939606),S=n(133769),A=n(855168),w=n(785893);const I=(0,a.createContext)(null),R=(0,a.createContext)(null);function O({children:e,immutableLocation:t,resourceTimingCacheSize:n,routerHistoryAction:o,staticContext:i}){const c=(0,a.useRef)(null),u=(0,a.useRef)(null),d=(0,a.useRef)(t),p=(0,a.useRef)(!0),{path:l}=(0,A.$B)(),m=(0,a.useRef)(l),v=!i.isCachedRender&&(0,r.Z)(i.deviceType);if((0,a.useEffect)((()=>{m.current=l}),[l]),(0,a.useEffect)((()=>{if((0,S.X_)({size:n||1e3}),(0,y.UQ)(),(0,C.A9)("totalSessionVolume"),window.performance?["clearMarks","clearMeasures","clearResourceTimings","getEntries","getEntriesByName","getEntriesByType","mark","measure","now","setResourceTimingBufferSize"].forEach((e=>{window.performance[e]||(0,C.A9)(`not_supported.window.performance.${e}`)})):(0,C.A9)("not_supported.window.performance"),window.PerformanceObserver||(0,C.A9)("not_supported.window.PerformanceObserer"),(0,h.v)()||(0,C.A9)("not_supported.grid_profiler"),p.current=!1,v&&!b.is){if(((e,t)=>{let n,a=0,r=0,o=null,i=null,c=null,u=null,d=[];const p=()=>{r+=1,c=window.requestAnimationFrame(p)},l=()=>{if(u){const n=(0,s.Jx)({name:"scroll_session",pwtStaticContext:e});if(!n)return;const r=d.some((e=>null!==o&&o-e>0&&o-e<=500)),c=t(),{isAuthenticated:u}=e,p={surface:c,isUserInvoked:r,isAuthenticated:u};if(null===o||null===i||0===a)null===o&&null===i?n.error("no_duration",p):null==o?n.error("no_start",p):null==i?n.error("no_end",p):n.error("no_frames",p);else{const e=i-o,t=e/a;0===t?n.error("zero_value",p):t<0?n.error("negative_value",p):(n.addBinaryAnnotation("isUserInvoked",r,"BOOL"),n.addBinaryAnnotation("surface",c,"STRING"),n.addBinaryAnnotation("isAuthenticated",u,"BOOL"),n.addBinaryAnnotation("scrollDuration",e,"I32"),n.addBinaryAnnotation("numberOfFrames",a,"I16"),n.stop(t))}}window.cancelAnimationFrame(c),a=0,r=0,d=[],i=null,o=null,u=null},m=({timeStamp:e})=>{n&&clearTimeout(n),n=setTimeout(l,500),null===u?(u=100*Math.random()<10,u&&(c=window.requestAnimationFrame(p),o=e)):u&&(i=e,a+=r,r=0)},f=({timeStamp:e})=>{d.push(e)};["wheel","pointerdown","keydown"].forEach((e=>{window.addEventListener(e,f,{passive:!0,capture:!0})})),window.addEventListener("scroll",m,{passive:!0}),window.addEventListener("pagehide",(()=>{window.removeEventListener("scroll",m),["wheel","pointerdown","keydown"].forEach((e=>{window.removeEventListener(e,f)}))}))})(i,(()=>_(m.current)?_(m.current)||"UNKNOWN_SURFACE":m.current||"UNKNOWN_SURFACE")),"Chrome"===i.browserName){f({staticContext:i,getCurrentRoute:()=>m.current,getLastNavigationTime:()=>u.current||0});const e=_(m.current);e&&g({pwtStaticContext:i,surface:e})}}}),[]),d.current!==t){d.current=t,u.current=null!==(T=window.performance)&&void 0!==T&&T.now?window.performance.now():null;const{current:e}=u;if(!p.current){const t=!c.current;(0,C.A9)("routeStart",{tags:{action:o}}),(0,S.Eg)(t),(0,y.Ux)(t),(0,y.on)(),(0,E.tl)();const{customBufferSize:n,defaultBufferSize:a}=(0,S.LH)();e&&((0,C.A9)("routeStart.customBufferSize",{count:n}),(0,C.A9)("routeStart.defaultBufferSize",{count:a}),c.current={time:e,action:o})}}var T;return(0,w.jsx)(I.Provider,{value:v?i:null,children:(0,w.jsx)(R.Provider,{value:c.current,children:e})})}const N=()=>(0,a.useContext)(R),k=()=>(0,a.useContext)(I)},68348:(e,t,n)=>{n.d(t,{Z:()=>i});const a=()=>{var e;return!(null===(e=window.performance)||void 0===e||!e.timing)};var r=n(974780),o=n(164485);function i(e){return!("desktop"===e&&!a())&&(!!r.Z&&(0,o.v)())}},701812:(e,t,n)=>{n.d(t,{jy:()=>r,cC:()=>o,sk:()=>i,qr:()=>s});const a=e=>"number"==typeof e?Math.round(e):e,r=e=>({type:"I16",value:a(e)}),o=e=>({type:"I32",value:a(e)}),i=e=>({type:"STRING",value:e}),s=e=>({type:"BOOL",value:e})},576618:(e,t,n)=>{n.d(t,{D3:()=>o,rX:()=>i,jh:()=>s,Hd:()=>c});var a=n(344120),r=n(641239);const o=e=>({...(0,a.Z)(e),domComplete:e.domComplete||0,domContentLoadedEventEnd:e.domContentLoadedEventEnd||0,domContentLoadedEventStart:e.domContentLoadedEventStart||0,domInteractive:e.domInteractive||0,loadEventEnd:e.loadEventEnd||0,loadEventStart:e.loadEventStart||0}),i=()=>{const{firstInputDelay:e,largestContentfulPaint:t}=(0,r.v2)();return{firstInputDelayStart:(null==e?void 0:e.startTime)||0,firstInputDelayEnd:(null==e?void 0:e.endTime)||0,largestContentfulPaint:t||0}},s=(e,t)=>Object.keys(t).reduce(((n,a)=>({...n,[`${e}${a}`]:t[a]})),{}),c=(e,t)=>Object.keys(e).reduce(((n,a)=>t.includes(a)?{...n,[a]:e[a]}:n),Object.freeze({}))},26382:(e,t,n)=>{n.d(t,{n:()=>T,r:()=>_});var a=n(894216),r=n(409352),o=n(133769),i=n(641239),s=n(139585),c=n(701812);const u=(e,t)=>(e||[]).reduce(((e,n)=>({...e,[`experiment.${n}`]:(0,c.sk)(t(n))})),{}),d=(e,t)=>"number"==typeof t?e(t):null,p=e=>e.reduce(((e,t)=>e+t),0),l=(e,t)=>Object.keys(t).reduce(((n,a)=>({...n,[`${e}${a}`]:t[a]})),{}),m=e=>{if(!e.length)return{};const t=e.map((({startTime:e,requestStart:t,responseStart:n,responseEnd:a})=>{const r=t||e;return{startTime:e,requestStart:r,responseStart:n||r,responseEnd:a}})),n=p(t.map((e=>e.requestStart-e.startTime))),a=p(t.map((e=>e.responseStart-e.requestStart))),r=p(t.map((e=>e.responseEnd-e.responseStart))),o=n+a+r,i=p(e.map((e=>e.decodedBodySize||0)));return{decodedBodySize:(0,c.cC)((s=i,Number(Number(s/1024).toFixed(3)))),"duration.all":(0,c.cC)(o),"duration.requestStartToResponseStart":(0,c.cC)(a),"duration.responseStartToResponseEnd":(0,c.cC)(r),"duration.startToRequestStart":(0,c.cC)(n)};var s},f=e=>{const t=e.filter((e=>!!e.responseEnd));return{...e.length?{...m(t),"count.completed":(0,c.cC)(t.length)}:{},"count.all":(0,c.cC)(e.length)}},y=e=>{const t=e.reduce(((e,t)=>(e[t.category]=(e[t.category]||[]).concat([t]),e)),{}),n={script:t.script,script_deferred:e.filter((e=>e.isDeferred)),external:e.filter((e=>e.isExternal)),css:t.css,image:t.image,video:t.video,xmlhttprequest:t.xmlhttprequest,visually_complete:e.filter((e=>e.isVisuallyCompleteRequired))};return Object.keys(n).reduce(((e,t)=>({...e,...l(`resource.${t}.`,f((n[t]||[]).map((e=>e.timing))))})),{})},v=(e,t)=>{const{devicePixelRatio:n,navigator:o,innerWidth:i,innerHeight:s,performance:u}=window,{deviceMemory:d,hardwareConcurrency:p,platform:l,userAgent:m}=o,{memory:f}=u,{appType:y,appVersion:v,browserName:T,browserVersion:g,deviceType:_,isAppShell:h,isAuthenticated:E,isBot:b,isSocialBot:C,locale:S,osName:A,stageName:w}=t,I="desktop"===_?y||5:y||6;let R;const{navigationType:O}=e;let N=null;if("initial_app_load"===O){var k;R=1;const e=null===(k=(0,a.Z)("navigation")[0])||void 0===k?void 0:k.transferSize;N=e?parseFloat((.001*e).toFixed(1)):null}else R=4;return{"app.type":(0,c.jy)(I),"app.version":(0,c.sk)(v),"browser.name":(0,c.sk)(T),"browser.version":(0,c.sk)(g),"cpu.speed":(0,c.jy)(p),"device.memory":(0,c.jy)(d),"device.type":(0,c.jy)(0),"device.typeName":(0,c.sk)(_),"device.version":(0,c.sk)("unknown"),"pwt.cause":(0,c.jy)(R),"pwt.result":(0,c.jy)(1),"view.type":(0,c.cC)(0),"viewport.height":(0,c.cC)(s||0),"viewport.width":(0,c.cC)(i||0),devicePixelRatio:(0,c.cC)(n||0),isAppShell:(0,c.qr)(h),isAuthenticated:(0,c.qr)(E),isBot:(0,c.qr)(b),isSocialBot:(0,c.qr)(C),locale:(0,c.sk)(S),osName:(0,c.sk)(A),...null!==N&&{htmlResponseSize:(0,c.cC)(N)},platform:(0,c.sk)(l||null),profilerVersion:(0,c.sk)("3"),pwtActionName:(0,c.jy)((0,r.Rp)(e)),stageName:(0,c.sk)(w),userAgent:(0,c.sk)(m),usedJSHeapSize:(0,c.cC)((null==f?void 0:f.usedJSHeapSize)||0),totalJSHeapSize:(0,c.cC)((null==f?void 0:f.totalJSHeapSize)||0),jsHeapSizeLimit:(0,c.cC)((null==f?void 0:f.jsHeapSizeLimit)||0)}},T=({annotateExperiments:e,metricId:t,pwtStaticContext:n,binaryAnnotations:a={},performanceResourceTimings:r=[]})=>{let i={};{const{connection:e,hardwareConcurrency:t,deviceMemory:n}=window.navigator;i={"net.effectiveType":(0,c.sk)((null==e?void 0:e.effectiveType)||null),"net.rtt":(0,c.cC)(d((e=>10*Math.round(e/10)),null==e?void 0:e.rtt)),"net.speed":(0,c.cC)((0,o.Hv)(r,!1)),"cpu.threads":(0,c.jy)(t),"memory.size":(0,c.cC)(n)}}return{...u(e,n.getExperimentGroup),...v(t,n),...a,...i,stopwatchVersion:(0,c.jy)(1)}},g=(e,t,n)=>{var a;const{navigator:r}=window,{connection:u,serviceWorker:l}=r,{surface:m,navigationType:f,isAuthenticated:y}=e,{cumulativeLayoutShiftScore:v,longTaskDurations:T}=(0,i.v2)();return{...T.length?{"longTask.count":(0,c.cC)(T.length),"longTask.maxDuration":(0,c.cC)(Math.max(...T)),"longTask.totalDuration":(0,c.cC)(p(T))}:{},cumulativeLayoutShiftScore:(0,c.cC)(100*v),"masonry.paginationMarkCount":(0,c.cC)((0,s.Ao)(s.at,t)),"metricId.isAuthenticated":(0,c.qr)(y),"metricId.navigationType":(0,c.sk)(f),"metricId.surface":(0,c.sk)(m),"net.effectiveType":(0,c.sk)((null==u?void 0:u.effectiveType)||null),"net.rtt":(0,c.cC)(d((e=>10*Math.round(e/10)),null==u?void 0:u.rtt)),"net.speed":(0,c.cC)((0,o.Hv)(n)),resourceBufferClearedCount:(0,c.jy)((0,s.Ao)("resourceBufferCleared",t)),scrollDuringLayout:(0,c.qr)((0,s.BA)("scrollDuringLayout",t)),serviceWorker:(0,c.qr)(l?!!l.controller:null),serviceWorkerState:(0,c.sk)((null==l||null===(a=l.controller)||void 0===a?void 0:a.state)||null)}},_=({annotateExperiments:e,binaryAnnotations:t={},entries:n,metricId:a,performanceResources:r,pwtEndTime:o,pwtStaticContext:i})=>({...t,...y(r),...u(e,i.getExperimentGroup),...v(a,i),...g(a,o,n)})},954321:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(974780);const r=()=>{const[e]=a.Z?a.Z.getEntriesByType("navigation"):[];return e}},299962:(e,t,n)=>{n.d(t,{Z:()=>g});let a=null;const r=(e,t)=>(a=a||{results:[],context:t},a.results.push(e),a);var o=n(840059),i=n(182513),s=n(409352),c=n(939606),u=n(954321),d=n(590606);const p=(e,t)=>Object.keys(e).reduce(((n,a)=>{const r=e[a];return r&&(n[a]={timestamp:t+r}),n}),{}),l=({span:e,timeOrigin:t})=>{return{id:e.id,parent_id:e.parentId||null,result:1,name:e.name,timestamp:t+e.startTime,duration:e.endTime-e.startTime,annotations:p(e.annotationMap,t),binary_annotations:(n=e.binaryAnnotationMap,Object.keys(n).reduce(((e,t)=>{const a=n[t];if(!a)return e;const{value:r,type:o}=a;return null==r?e:e.concat({name:t,value:r,annotation_type:o})}),[]))};var n},m=(e,{startTime:t,endTime:n,annotationMap:a,binaryAnnotationMap:r,parentId:o,traceId:i})=>({name:`pwt/${e}`,startTime:t,endTime:n,annotationMap:a,binaryAnnotationMap:r,parentId:o,id:i}),f=({annotations:e})=>e.reduce(((e,{key:t,timestamp:n})=>({...e,[`server_${t}`]:{timestamp:n}})),{}),y=(e,t)=>({...e,annotations:{...f(t),...e.annotations},binary_annotations:[...t.binary_annotations,...e.binary_annotations]}),v=({traceId:e,actionName:t,result:n,timeOrigin:a,serverDataToJoin:r})=>{let o=l({span:m(t,n),timeOrigin:a}),i=null;return r&&(o=y(o,r),i=((e,t,n)=>{const a=(0,u.Z)();return(null==a?void 0:a.responseEnd)?y(l({span:{name:"html",startTime:0,endTime:(null==a?void 0:a.responseEnd)||1,annotationMap:{},binaryAnnotationMap:{},id:e.server_span_id||(0,d.Z)(),parentId:t},timeOrigin:n}),e):null})(r,e,a)),{trace_id:e,spans:[o,...i?[i]:[],...n.spans.map((e=>l({span:e,timeOrigin:a})))]}},T=(0,i.X)("reportResult");function g({metricId:e,pwtStaticContext:t,result:n,isAuth:a}){const{ajax:i,serverData:u}=t,d=(0,s.KJ)(e),p=`${n.type}.${d}`,l=void 0!==a&&{tags:{isAuth:a}}||void 0;if((0,c.A9)(n.reason?p.concat(`.${n.reason}`):p,l),"COMPLETE"!==n.type)return void T(`Abort metric ${d}`,n);const m=null!==(f=window.performance)&&void 0!==f&&f.now?Date.now()-window.performance.now():"unknown";var f,y;if("unknown"===m)return T(`Unable to convert to absolute times for ${d} due to missing time origin`),void(0,c.A9)(`missingTimeOrigin.${d}`,l);if(o.is&&(window.PWT_LAB_DATA=r(n,t)),n.spans.length&&(n.spans=n.spans.map((e=>(e.parentId||e.id===n.traceId||"network_resources"===e.name||(e.parentId=n.traceId),e)))),!o.is){const a=e.navigationType&&"initial_app_load"===e.navigationType,r=n.traceId,s=v({traceId:r,actionName:d,result:n,timeOrigin:m,serverDataToJoin:a&&u||null});i({type:"POST",url:"/_/_/trace/trace/",data:{report_data:JSON.stringify(s),report_context:JSON.stringify((y=t,{debugTrace:o.eD,locale:y.locale,stageName:y.stageName,userId:y.isAuthenticated?y.userId:null}))}}),T(`PinTrace ${d} will be available shortly: https://pintrace.pinadmin.com/zipkin/traces/${r.toString(16)}`,{duration:n.endTime-n.startTime,result:n,pwtStaticContext:t})}}},344120:(e,t,n)=>{n.d(t,{Z:()=>a});const a=e=>({connectEnd:e.connectEnd||0,connectStart:e.connectStart||0,domainLookupEnd:e.domainLookupEnd||0,domainLookupStart:e.domainLookupStart||0,fetchStart:e.fetchStart||0,requestStart:e.requestStart||0,redirectEnd:e.redirectEnd||0,redirectStart:e.redirectStart||0,responseEnd:e.responseEnd||0,responseStart:e.responseStart||0,secureConnectionStart:e.secureConnectionStart||0,startTime:e.startTime||0,workerStart:e.workerStart||0,unloadEventStart:e.unloadEventStart||0,unloadEventEnd:e.unloadEventEnd||0})},842310:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(590606),r=n(344120),o=n(701812);const i=({category:e,isDeferred:t,isExternal:n})=>[e].concat(t?["deferred"]:[]).concat(n?["external"]:[]).join("_");function s(e,t){const{category:n,timing:s,isDeferred:c,isExternal:u,isVisuallyCompleteRequired:d}=e;return s.responseEnd&&("image"!==n||d)?{name:i(e),id:(0,a.Z)(),parentId:t,startTime:s.startTime,endTime:s.responseEnd,annotationMap:(0,r.Z)(s),binaryAnnotationMap:{category:(0,o.sk)(n),decodedBodySize:(0,o.cC)(s.decodedBodySize||0),initiatorType:(0,o.sk)(s.initiatorType),isDeferred:(0,o.qr)(c),isExternal:(0,o.qr)(u),name:(0,o.sk)(s.name),nextHopProtocol:(0,o.sk)(s.nextHopProtocol),transferSize:(0,o.cC)(s.transferSize||0)}}:null}},169039:(e,t,n)=>{n.d(t,{Z:()=>b});var a=n(667294),r=n(762803),o=n(666584),i=n(46509),s=n(954321),c=n(403369),u=n(590606),d=n(299962),p=n(842310),l=n(974780),m=n(182513),f=n(940094),y=n(26382),v=n(576618),T=n(939606);const g=(0,m.X)("PwtStopwatch"),_=(e,t)=>{if(l.Z){if("start"===t.type&&!e.isTiming){const{name:n,startTime:a,navigationType:r}=t;return(0,T.A9)(`TIMING.${n}`),{isTiming:!0,name:n,isSampled:t.isSampled,startTime:"number"==typeof a?a:l.Z.now(),metricId:{type:"stopwatch",name:n,navigationType:r},pwtStaticContext:t.pwtStaticContext,annotations:e.annotations,binaryAnnotations:e.binaryAnnotations,spans:e.spans,traceId:e.traceId}}if(!e.isTiming){if(!t.bypassIsTimingCheck){const n=t.name||e.name;return g("ignoring action - stopwatch is not actively timing",t),(0,T.A9)(`WARN.${n}.noTiming.${t.type}`),e}g("allowing action while stopwatch is not actively timing (bypassIsTimingCheck is set to true)",t)}if("annotate"===t.type){const n=l.Z.now();return g(`adding annotation {${t.label}: ${n}}`),{...e,annotations:e.annotations.concat([{label:t.label,timestamp:n}])}}if("binaryAnnotate"===t.type)return g(`adding binary annotation {${t.name}: ${String(t.value)}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:t.value,type:t.annotationType}}};if("binaryAnnotateOperation"===t.type){const{value:n,type:a}=t.binaryAnnotationValueAndType;if(e.binaryAnnotations[t.name]){const r=e.binaryAnnotations[t.name].value||0;return g(`operating on binary annotation {\n          name: ${t.name}\n          pervious value: ${String(r)}\n          operand: ${String(n)}\n        }`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:n?t.operation(r,n):r,type:a}}}}return{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:n,type:a}}}}if("addSubspan"===t.type){g(`adding subspan {${t.name}}`);-1!==e.spans.findIndex((e=>e.name===t.name))&&g(`WARNING: adding duplicate subspan name {${t.name}}`);const n=t.id||(0,u.Z)();-1!==e.spans.findIndex((e=>e.id===n))&&g(`WARNING: adding duplicate subspan id {${t.name}: ${n}}`);let a=0;return t.startTime?a=t.startTime:e.startTime?a=e.startTime:g(`WARNING: adding subspan {${t.name}} without start time`),{...e,spans:[...e.spans,{name:t.name,id:n,startTime:a,endTime:t.endTime||1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations},parentId:t.parentId}]}}if("subspanStart"===t.type){var n;g(`starting subspan {${t.name}}`);-1!==e.spans.findIndex((e=>e.name===t.name))&&g(`WARNING: starting duplicate subspan name {${t.name}}`);const a=t.id||(0,u.Z)();-1!==e.spans.findIndex((e=>e.id===a))&&g(`WARNING: starting duplicate subspan id {${t.name}: ${a}}`);const r=t.parentName?null===(n=e.spans.find((e=>e.name===t.parentName)))||void 0===n?void 0:n.id:null;return{...e,spans:[...e.spans,{name:t.name,id:a,parentId:t.parentId||r,startTime:l.Z.now(),endTime:1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations}}]}}if("subspanStop"===t.type){if(g(`stopping subspan {${t.name}}`),!t.id){e.spans.reduce(((e,n)=>(n.name===t.name&&e.push(n),e)),[]).length>1&&(0,T.H)("duplicate_subspan_stop_name",{name:t.name})}const n=t.id?e.spans.findIndex((e=>e.id===t.id)):e.spans.findIndex((e=>e.name===t.name));return n>-1?(e.spans[n].endTime=l.Z.now(),t.annotations&&(e.spans[n].annotationMap={...e.spans[n].annotationMap,...t.annotations}),t.binaryAnnotations&&(e.spans[n].binaryAnnotationMap={...e.spans[n].binaryAnnotationMap,...t.binaryAnnotations})):(0,T.H)("invalid_subspan_stop_name",{name:t.name}),e}if("stop"===t.type&&e.isTiming){const{startTime:n,metricId:a,pwtStaticContext:r,annotations:o,binaryAnnotations:c,isSampled:m,spans:T,traceId:g}=e;if(t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect(),m){const e=t.stopTime||l.Z.now(),m=[...T.map((t=>(t.endTime===1/0&&(t.endTime=e),t)))];if(t.manualAndResourceSpans||0===T.length){const a=(0,u.Z)();m.push({name:"network_resources",id:a,startTime:n,endTime:e,annotationMap:{},binaryAnnotationMap:{},parentId:null},...(t.customStopwatchBuffer||[]).map((e=>(0,p.Z)((0,f.p)(e,[]),a))).filter(Boolean))}const _="initial_app_load"===a.navigationType&&(0,s.Z)(),h={type:"COMPLETE",traceId:g,startTime:n,endTime:e,spans:m,annotationMap:{...(0,i.Z)(o),...(0,v.jh)("browser_",_?(0,v.D3)(_):{})},binaryAnnotationMap:(0,y.n)({metricId:a,pwtStaticContext:r,binaryAnnotations:c,performanceResourceTimings:t.customStopwatchBuffer||[]})};(0,d.Z)({metricId:a,pwtStaticContext:r,result:h})}return{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,u.Z)()}}if("error"===t.type){const{error:n,stopwatchPerformanceObserver:a}=t;return n&&(0,T.H)(n),a&&a.disconnect(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,u.Z)()}}if("abort"===t.type&&e.isTiming){t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect();const{metricId:n,pwtStaticContext:a}=e,r=t.reason||"";return(0,d.Z)({metricId:n,pwtStaticContext:a,result:{type:"ABORT",reason:r}}),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,u.Z)()}}}return e},h=({name:e,sampleRate:t,navigationType:n,manualAndResourceSpans:r=!1})=>{const i=(0,o.N5)(),s=(0,a.useRef)([]),d=(0,a.useRef)(null),[p,l]=(0,a.useReducer)(_,{isTiming:!1,name:e,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,u.Z)()});return i?{isTiming:p.isTiming,start:a=>{if(window.PerformanceObserver){const e=1e3;s.current=[],d.current=(0,c.Z)({entryTypes:["resource"]},(t=>{s.current=s.current.concat(t.getEntries()),s.current.length>e&&(s.current=s.current.slice(-e))}))}const r={type:"start",startTime:a,name:e,navigationType:n,pwtStaticContext:i,isSampled:!t||Math.random()<t};return l(r)},stop:e=>l({type:"stop",stopTime:e,stopwatchPerformanceObserver:d.current,customStopwatchBuffer:s.current,manualAndResourceSpans:r}),error:e=>{l({type:"error",stopwatchPerformanceObserver:d.current,error:e})},abort:e=>l({type:"abort",stopwatchPerformanceObserver:d.current,customStopwatchBuffer:s.current,reason:e}),annotate:(e,t,n=!1)=>l({type:"annotate",label:e,parentId:t,bypassIsTimingCheck:n}),binaryAnnotate:(e,t,n,a,r=!1)=>l({type:"binaryAnnotate",name:e,value:t,annotationType:n,parentId:a,bypassIsTimingCheck:r}),binaryAnnotateOperation:({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:a,bypassIsTimingCheck:r=!1})=>l({type:"binaryAnnotateOperation",name:e,binaryAnnotationValueAndType:t,operation:n,parentId:a,bypassIsTimingCheck:r}),addSubspan:({name:e,startTime:t,endTime:n,annotations:a={},binaryAnnotations:r={},parentId:o=null,id:i=null,bypassIsTimingCheck:s=!1})=>l({type:"addSubspan",name:e,startTime:t,endTime:n,annotations:a,binaryAnnotations:r,parentId:o,id:i,bypassIsTimingCheck:s}),subspanStart:({name:e,annotations:t={},binaryAnnotations:n={},parentId:a=null,parentName:r=null,id:o=null,bypassIsTimingCheck:i=!1})=>l({type:"subspanStart",name:e,annotations:t,binaryAnnotations:n,parentId:a,parentName:r,id:o,bypassIsTimingCheck:i}),subspanStop:({name:e,annotations:t,binaryAnnotations:n,id:a,parentId:r,bypassIsTimingCheck:o=!1})=>l({type:"subspanStop",name:e,annotations:t,binaryAnnotations:n,id:a,parentId:r,bypassIsTimingCheck:o}),getSpans:(e,t)=>p.spans.filter((n=>n[e]===t)),getTraceId:()=>p.traceId}:null};var E=n(785893);const b=({name:e,v2LoggerMetricName:t,sampleRate:n,abortOnUnloadOrClientNavigation:i=!0,navigationType:s,manualAndResourceSpans:c=!1})=>{const{Provider:u,useHook:d}=(0,r.js)(`Stopwatch_${e}`);return{Provider:function({children:t}){const r=h({name:e,sampleRate:n,navigationType:s,manualAndResourceSpans:c}),d=(0,o.fM)(),p=d?d.time:0,l=(0,a.useRef)(!1),m=null==r?void 0:r.isTiming,f=t=>{l.current?(l.current=!1,null==r||r.abort(t)):(0,T.A9)(`WARN.${e}.noTiming.abort`)};return(0,a.useEffect)((()=>()=>{i&&f("unloadOrClientNavigation")}),[p]),(0,E.jsx)(u,{value:{isTiming:m,abort:f,addAnnotation:(e,t)=>{null==r||r.annotate(e,t)},addBinaryAnnotation:(e,t,n,a)=>{null==r||r.binaryAnnotate(e,t,n,a)},binaryAnnotationOperation:({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:a,bypassIsTimingCheck:o})=>{null==r||r.binaryAnnotateOperation({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:a,bypassIsTimingCheck:o})},addSubspan:({name:e,startTime:t,endTime:n,annotations:a,binaryAnnotations:o,parentId:i,id:s,bypassIsTimingCheck:c})=>{null==r||r.addSubspan({name:e,startTime:t,endTime:n,annotations:a,binaryAnnotations:o,parentId:i,id:s,bypassIsTimingCheck:c})},subspanStart:({name:e,annotations:t,binaryAnnotations:n,parentId:a,parentName:o,id:i,bypassIsTimingCheck:s})=>{null==r||r.subspanStart({name:e,annotations:t,binaryAnnotations:n,parentId:a,parentName:o,id:i,bypassIsTimingCheck:s})},subspanStop:({name:e,annotations:t,binaryAnnotations:n,id:a,parentId:o,bypassIsTimingCheck:i})=>{null==r||r.subspanStop({name:e,annotations:t,binaryAnnotations:n,id:a,parentId:o,bypassIsTimingCheck:i})},getSpans:(e,t)=>r?r.getSpans(e,t):[],getTraceId:()=>r?r.getTraceId():0,error:t=>{l.current?(l.current=!1,null==r||r.error(t)):(0,T.A9)(`WARN.${e}.noTiming.error`)},start:e=>{l.current&&(null==r||r.abort("duplicated_init_stopwatch_action")),l.current=!0,null==r||r.start(e)},stop:t=>{l.current?(l.current=!1,null==r||r.stop(t)):(0,T.A9)(`WARN.${e}.noTiming.stop`)}},children:t})},useHook:d}}},256721:(e,t,n)=>{n.d(t,{ku:()=>A,Jx:()=>b,PY:()=>S});var a=n(954321),r=n(641239);const o=()=>(0,r.PJ)().reduce(((e,{identifier:t,loadTime:n,renderTime:a})=>e[`${t}_loadTime`]?e[`${t}_dupe_loadTime`]?{...e,[`${t}_dupe_loadTime`]:n,[`${t}_dupe_renderTime`]:a}:e:{...e,[`${t}_loadTime`]:n,[`${t}_renderTime`]:a}),Object.freeze({}));var i=n(344120),s=n(576618),c=n(133769),u=n(715930);const d=e=>{switch(e){case"pin_closeup":{const e=(0,u.Z)();return(e=>{const t=(0,c.y0)();return e.reduce(((e,{name:n,match:a})=>t.filter((e=>a(e))).slice(0,2).reduce(((e,t,a)=>({...e,...(0,s.jh)(`${n}${a?"_dupe1":""}_`,(0,i.Z)(t))})),e)),Object.freeze({}))})([{name:"mainImage",match:({name:t})=>t===e},{name:"PinResource",match:({name:e})=>e.includes("PinResource")}])}default:return{}}};var p=n(403369),l=n(590606),m=n(299962),f=n(842310),y=n(182513),v=n(139585),T=n(940094),g=n(26382),_=n(939606);const h=(0,y.X)("LightStopwatch"),E={},b=({annotateExperiments:e,annotateMarks:t,annotateResourceTimingForSurface:n,name:r,pwtStaticContext:i})=>{const c=(()=>{let e=[],t=null;if(window.PerformanceObserver){const n=1e3;t=(0,p.Z)({entryTypes:["resource"]},(t=>{e=e.concat(t.getEntries()),e.length>n&&(e=e.slice(-n))}))}return{get:()=>e,disconnect:()=>{t&&t.disconnect()}}})();let u=!0,y={};(0,_.A9)(`TIMING.${r}`,{tags:{isAuth:i.isAuthenticated}});const b={type:"stopwatch",name:r,navigationType:"initial_app_load"},C={abort:e=>{u?(u=!1,(0,m.Z)({metricId:b,pwtStaticContext:i,result:{type:"ABORT",reason:e}})):(0,_.H)("duplicate_abort_action",{action:r})},error:(e,t)=>{const n={...t,action:r};u?(e&&(0,_.H)(e,n),c&&c.disconnect(),u=!1):(0,_.H)("duplicate_error_action",n)},stop:p=>{if(!u)return void(0,_.H)("duplicate_stop_action",{action:r});u=!1,c.disconnect();const h=(0,l.Z)(),E=(0,a.Z)(),C=c.get(),S={type:"COMPLETE",traceId:(0,l.Z)(),startTime:0,endTime:p,spans:[{name:"network_resources",id:h,startTime:0,endTime:p,annotationMap:{},binaryAnnotationMap:{},parentId:null},...C.map((e=>(0,f.Z)((0,T.p)(e,[]),h))).filter(Boolean)],annotationMap:{...(0,s.jh)("resource_",n?d(n):{}),...(0,s.jh)("element_",o()),...(0,s.jh)("mark_",t&&t.length?(0,s.Hd)((0,v.gQ)(),t):{}),...(0,s.jh)("browser_",E?(0,s.D3)(E):{})},binaryAnnotationMap:(0,g.n)({annotateExperiments:e,metricId:b,pwtStaticContext:i,performanceResourceTimings:C,binaryAnnotations:y})};(0,m.Z)({metricId:b,pwtStaticContext:i,result:S,isAuth:i.isAuthenticated})},addBinaryAnnotation:(e,t,n)=>{h(`adding binary annotation {${e}: ${String(t)}}`),y={...y,[e]:{value:t,type:n}}}};return E[r]=C,C},C=e=>E[e],S=e=>!!C(e),A=({stopwatchName:e,binaryAnnotationName:t,value:n,annotationType:a})=>{const r=C(e);r&&r.addBinaryAnnotation(t,n,a)}},46509:(e,t,n)=>{n.d(t,{Z:()=>a});const a=e=>{let t={};e.forEach((({label:e,timestamp:n})=>{t={...t,[e]:(t[e]||[]).concat([n])}}));let n=Object.freeze({});return Object.keys(t).forEach((e=>{(t[e]||[]).forEach(((t,a)=>{const r=a?`${e}_${a+1}`:e;n={...n,[r]:t}}))})),n}},641239:(e,t,n)=>{n.d(t,{on:()=>i,PJ:()=>c,Ux:()=>u,v2:()=>d,Kj:()=>l,UQ:()=>m});var a=n(161133),r=n(403369);const o={cumulativeLayoutShiftScore:0,firstInputDelay:null,longTaskDurations:[],largestContentfulPaint:null,elementTimings:[]},i=()=>{o.longTaskDurations=[]},s=(0,a.Z)((()=>o.elementTimings)),c=()=>s.get(),u=e=>{e&&s.save(),o.elementTimings=[]},d=()=>o;let p=0;const l=()=>p,m=()=>{(0,r.Z)({type:"element",buffered:!0},(e=>{o.elementTimings=o.elementTimings.concat(e.getEntries().reduce(((e,{identifier:t,loadTime:n,renderTime:a})=>e.concat("string"==typeof t&&"number"==typeof n&&"number"==typeof a?[{identifier:t,loadTime:n,renderTime:a}]:[])),[]))})),(0,r.Z)({entryTypes:["longtask"]},(e=>{e.getEntries().map((e=>o.longTaskDurations.push(e.duration)))}),(()=>i())),(0,r.Z)({type:"first-input",buffered:!0},((e,t)=>{const n=e.getEntries()[0];n&&n.startTime&&n.processingStart&&(o.firstInputDelay={startTime:n.startTime,endTime:n.processingStart}),t.disconnect()}),(()=>{o.firstInputDelay=null})),(0,r.Z)({type:"largest-contentful-paint",buffered:!0},(e=>{const t=e.getEntries(),n=t.length,a=t[n-1];a&&(p=n,o.largestContentfulPaint=a.renderTime||a.loadTime||null)})),(0,r.Z)({type:"layout-shift",buffered:!0},(e=>{e.getEntries().forEach((e=>{e.hadRecentInput||(o.cumulativeLayoutShiftScore+=e.value)}))}))}},715930:(e,t,n)=>{n.d(t,{f:()=>a,Z:()=>r});const a="closeupImage",r=()=>{if(!document.querySelector)return null;const e=document.querySelector('head>link[rel="preload"][as="image"][href^="https://i.pinimg.com/"]');return e instanceof HTMLLinkElement?e.href:null}},590606:(e,t,n)=>{function a(){let e="";for(let t=0;t<15;t+=1){e+="0123456789"[Math.floor(10*Math.random())]}return Number(e)}n.d(t,{Z:()=>a})},886550:(e,t,n)=>{n.d(t,{UZ:()=>u,Z8:()=>d});var a=n(667294),r=(n(40142),n(311866)),o=n(762803),i=n(785893);const{Provider:s,useHook:c}=(0,o.ZP)("ResourceContext");function u({children:e}){const[t,n]=(0,a.useReducer)(((e,t)=>{var n;switch(t.type){case"addListener":const a=[...null!==(n=e[t.payload.name])&&void 0!==n?n:[],t.payload.handler];return{...e,[t.payload.name]:a};case"removeListener":if(!e[t.payload.name])return e;const r=e[t.payload.name].filter((e=>e!==t.payload.handler));return{...e,[t.payload.name]:r};default:return e}}),{});r.ZP.fetchCompleteCallback=({resource:e,options:n,response:a,normalizedResponse:r,refresh:o,resourceSchema:i})=>{t[e]&&t[e].forEach((t=>t({isRefresh:o,normalizedResponse:r,options:n,schema:i,resource:e,response:a})))};const o=(0,a.useMemo)((()=>({listenerDispatch:n})),[]);return(0,i.jsx)(s,{value:o,children:e})}function d(e,t){const{listenerDispatch:n}=c();(0,a.useEffect)((()=>(n({type:"addListener",payload:{name:e,handler:t}}),()=>{n({type:"removeListener",payload:{name:e,handler:t}})})))}},660310:(e,t,n)=>{n.d(t,{R3:()=>o,NO:()=>i,Jc:()=>s,th:()=>c,ge:()=>d});var a=n(238402);const r=["and","that","but","or","as","if","when","than","because","while","where","after","so","though","since","until","whether","before","although","nor","like","once","unless","now","except","the","a","an","san","for","in","with"],o={AUTO_COMPLETE_DEFAULT:"query",AUTO_COMPLETE_HASHTAG:"hashtag",AUTO_COMPLETE_RECENT_SEARCH:"recent_query",AUTO_COMPLETE_RECOMMENDED_SEARCH:"recommended_query",AUTO_COMPLETE_TRENDING:"trending",TYPO_AUTO_CORRECT_ORIGINAL:"typo_auto_original",USER_INPUT:"typed",SEARCH_GUIDE:"add_refine"};function i(e){return(e||"").trim().replace(/\s+/g," ")}function s({type:e,term:t="",index:n}){switch(e){case o.USER_INPUT:case o.AUTO_COMPLETE_HASHTAG:case o.TYPO_AUTO_CORRECT_ORIGINAL:return`${t}|${e}`;case o.AUTO_COMPLETE_DEFAULT:return`${t}|autocomplete|${n}`;case o.AUTO_COMPLETE_RECENT_SEARCH:return`${t}|recentsearch|${n}`;case o.AUTO_COMPLETE_TRENDING:return`${t}|trending|${n}`;case o.AUTO_COMPLETE_RECOMMENDED_SEARCH:return`${t}|recommended|${n}`;case o.SEARCH_GUIDE:return`${t}|guide|word|${n}`;default:return""}}function c({queryStates:e}){return 0===e.length?"":"&"+(0,a.Z)({term_meta:e.map((e=>s(e)))})}function u(e){if(e){const t=e.trim().split(/\s+/);return t.find((e=>r.includes(e.toLowerCase())))?[e]:t}return[]}function d({type:e,query:t="",index:n}){switch(e){case o.USER_INPUT:case o.AUTO_COMPLETE_HASHTAG:case o.TYPO_AUTO_CORRECT_ORIGINAL:return u(t).map((t=>({index:n,term:t,type:e})));case o.AUTO_COMPLETE_RECENT_SEARCH:case o.AUTO_COMPLETE_RECOMMENDED_SEARCH:case o.AUTO_COMPLETE_TRENDING:case o.AUTO_COMPLETE_DEFAULT:return u(t).map((t=>({term:t,type:e,index:n})));default:return[]}}},81260:(e,t,n)=>{n.d(t,{RR:()=>a,YB:()=>r,yR:()=>o,YL:()=>i,pE:()=>s,h8:()=>c,Cc:()=>u});const a="0.8.0",r=9/16,o=8,i=10;function s(e,t=1){return{x:(null!=e?e:24)/5,y:(null!=e?e:24)*(t-1)}}const c={COMMENT_REPLY_STICKER:"story_pin_comment_reply_block",HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MENTION_STICKER:"story_pin_mention_sticker_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",PRODUCT_STICKER:"story_pin_product_sticker_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",VTO_MAKEUP_STICKER:"story_pin_virtual_try_on_makeup_sticker_block"},u={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28}},192830:(e,t,n)=>{n.d(t,{i5:()=>h,sX:()=>b,Z5:()=>_,NG:()=>E,MT:()=>C});var a=n(667294),r=n(40142),o=n(311866),i=n(682492),s=n.n(i);const c=(e,t)=>e.data[t]&&e.data[t].messages||[];function u(e,t){const n={};return e.filter((e=>!!e)).reduce(((e,a)=>{const r=t(a);return n[r]?(s()(n[r],a),e):(n[r]=a,e.concat([a]))}),[])}function d(e){return[...e].sort(((e,t)=>new Date(e.created_ms||e.created_at)-new Date(t.created_ms||t.created_at)))}function p(e,t,n){let a=c(e,t).concat(n);return a=u(a,(e=>e.id)),d(a)}const l={conversationsUnseenCount:0,data:{},open:null,showConversationsDropdown:!1,ui:{},unread:0};function m(e=l,t){if("CONVERSATION_OPEN"===t.type)return{...e,open:t.payload.id,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:t.payload.isPreview}}};if("CONVERSATION_CLOSE"===t.type)return{...e,open:null,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:!1,isDeclined:t.payload.isDeclined}}};if("CONVERSATION_CREATE"===t.type){const{id:n}=t.payload;return{...e,data:{...e.data,[n]:{...e[n]||{},...t.payload}}}}if("CONVERSATION_DELETE"===t.type){const n={...e,data:{...e.data}},{id:a}=t.payload;return delete n.data[a],n}if("FETCH_COMPLETE"===t.type){const{options:n,resource:a,response:r}=t.payload,o=r.resource_response.data;if("ConversationMessagesResource"===a){const t=o||[],a=(null==n?void 0:n.conversation_id)||"",r=p(e,a,t),i=r[r.length-1];return{...e,data:{...e.data,[a]:{...e.data[a],id:a,messages:r,unread:0,last_message:i}}}}if("ConversationsResource"===a){const t=o||[],n={...e,data:{...e.data}};return t.forEach((e=>{const{id:t,created_at:a,name:r,board:o,emails:i,unread:s,users:c,last_message:u}=e,d=p(n,t,[u]);n.data[t]={...n.data[t],id:t,created_at:a,name:r,board:o,emails:i||[],unread:s||0,users:c||[],last_message:u,messages:d}})),n}if("ConversationResource"===a){const t=o||{},{id:n}=t,a={...e,data:{...e.data}};return n&&(a.data[n]={...a.data[n],...t}),a}if("NewsHubBadgeResource"===a){if(o){const t=o.conversations_unseen_count||0;return{...e,unread:t}}return e}}else{if("MESSAGE_SEND_PENDING"===t.type){const{id:n,message:a}=t.payload;if(e.data[n]){const t=p(e,n,[a]);return{...e,data:{...e.data,[n]:{...e.data[n],id:n,messages:t,last_message:a}}}}return e}if("MESSAGE_SEND_PENDING_CLEAR"===t.type){const{id:n,messageId:a,newMessageId:r}=t.payload;if(e.data[n]){const t=c(e,n).find((e=>e.id===a));if(t){const o={...t,id:r};let i=c(e,n).filter((e=>e.id!==a)).concat([o]);return i=u(i,(e=>e.id)),i=d(i),{...e,data:{...e.data,[n]:{...e.data[n],id:n,messages:i}}}}}return e}if("CLOSE_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!1};if("OPEN_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!0};if("UPDATE_UNREAD_COUNT"===t.type)return{...e,conversationsUnseenCount:t.payload}}return e}var f=n(762803),y=n(886550),v=n(785893);const T=(()=>{let e=0;return()=>e++})(),{Provider:g,useHook:_}=(0,f.ZP)("Conversations");function h({children:e}){const[t,n]=(0,a.useReducer)(m,l),r=(0,a.useCallback)((e=>n({type:"FETCH_COMPLETE",payload:e})),[]);(0,y.Z8)("ConversationMessagesResource",r),(0,y.Z8)("ConversationsResource",r),(0,y.Z8)("ConversationResource",r),(0,y.Z8)("NewsHubBadgeResource",r);const i=(0,a.useMemo)((()=>({conversations:t,conversationOpen:(e,t=!1,a="")=>n({type:"CONVERSATION_OPEN",payload:{id:e,isPreview:t,contactRequestId:a}}),conversationClose:(e,t="",a=!1)=>n({type:"CONVERSATION_CLOSE",payload:{id:e,contactRequestId:t,isDeclined:a}}),conversationCreate:e=>n({type:"CONVERSATION_CREATE",payload:e}),conversationDelete:e=>n({type:"CONVERSATION_DELETE",payload:{id:e}}),conversationGet:(e,t,a)=>{o.ZP.create("ConversationsResource",{user_ids:e,emails:t,text:""}).callCreate().then((e=>{const t=e&&e.resource_response.data;n({type:"CONVERSATION_OPEN",payload:{id:t.id}})})).catch((e=>{const t=e.message_detail||e.message||"";a(t)}))},dropdownClose:()=>{n({type:"CLOSE_DROPDOWN"})},dropdownOpen:()=>{n({type:"OPEN_DROPDOWN"})},pendingMessageSend:(e,t)=>n({type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}}),pendingMessageClear:(e,t,a)=>n({type:"MESSAGE_SEND_PENDING_CLEAR",payload:{id:e,messageId:t,newMessageId:a}}),updateUnreadCount:e=>n({type:"UPDATE_UNREAD_COUNT",payload:e})})),[t]);return(0,v.jsx)(g,{value:i,children:e})}function E(){const{conversations:e,conversationCreate:t,pendingMessageSend:n,pendingMessageClear:a}=_(),i=(0,r.useSelector)((({pins:e})=>e));return(r,s,c,u)=>new Promise(((d,p)=>{const{text:l,pinId:m,boardId:f,userId:y,didItId:v}=s;function g(){const e=o.ZP.create("ConversationMessagesResource",{conversation_id:r,text:l,pin:m,board:f,user:y,user_did_it_data:v,source:c}),t=`${T()}`;n(r,{text:l,sender:u,created_at:(new Date).toString(),created_ms:Date.now(),id:t,board:null,event_type:null,pin:m?i[m]:null,type:"message",user_did_it_data:null,user:null}),e.callCreate().then((e=>{a(r,t,e.resource_response.data.id),d()})).catch(p)}e.data[r]?g():o.ZP.create("ConversationResource",{conversation_id:r}).callGet().then((e=>{const n=e&&e.resource_response&&e.resource_response.data;t(n),g()}))}))}function b(e){const{conversations:t}=_();return t.data[e]}function C(e){const{conversations:t}=_();return t.ui[e]||{contactRequestId:"",isDeclined:!1,isPreview:!1}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/62819-f7af3105642b0b91.mjs.map